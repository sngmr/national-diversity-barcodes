(this["webpackJsonpnational-diversity-barcodes"]=this["webpackJsonpnational-diversity-barcodes"]||[]).push([[0],{424:function(e,t,n){"use strict";n.r(t);var c=n(20),a=n.n(c),r=n(184),i=n.n(r),s=(n(200),n(57)),l=n(195),o=n(58),d=n(118),u=n(128),h=n.n(u),j=n(191),b=n(192),f=n.n(b),m={getAllNationalFlags:function(){return Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://restcountries.eu/rest/v2/all");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}};function x(e){var t=e.width*e.height,n=function(e,t,n){return function(e,t,n){for(var c,a,r,i,s=[],l=0;l<t;l+=n)a=e[c=4*l],r=e[c+1],i=e[c+2],s.push([a,r,i]);return s}(e.getContext("2d").getImageData(0,0,e.width,e.height).data,t,n)}(e,t,10).map((function(e){return"#"+e.map((function(e){return("0"+e.toString(16)).slice(-2)})).join("")})).reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{});return Object.entries(n).map((function(e){var n=Object(o.a)(e,2),c=n[0],a=n[1],r=Math.round(a/t*10*100);return{color:c,count:a,pixelCount:t,area:r}})).sort((function(e,t){return t.count-e.count})).filter((function(e){return e.count>=.0025*t}))}var g=n(193),O=n(194),p=n.n(O),v=1600,y=900;function w(e,t){for(var n={name:"svg",type:"element",value:"",attributes:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:v,height:y},children:[{name:"rect",type:"element",value:"",attributes:{x:0,y:0,width:v,height:y,fill:"#FFFFFF"},children:[]}]},c=p()(t.filter((function(e){return"#FFFFFF"!==e.toUpperCase()}))),a=e?y:v,r=a/c.length*.25,i=(a-r*(c.length-1))/c.length,s={name:"rect",type:"element",value:"",attributes:null,children:[]},l=0;l<c.length;l++){var o=Object.create(s);o.attributes=e?{x:0,y:l*i+l*r,width:v,height:i,fill:c[l]}:{x:l*i+l*r,y:0,width:i,height:y,fill:c[l]},n.children.push(o)}return g.stringify(n)}var N=n(4);var C=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),i=Object(o.a)(r,2),u=i[0],h=i[1],j=Object(c.useState)([]),b=Object(o.a)(j,2),f=b[0],g=b[1];Object(c.useEffect)((function(){m.getAllNationalFlags().then((function(e){a(e.data)}))}),[]),Object(c.useEffect)((function(){u.forEach((function(e){var t=document.getElementById("canvas_"+e.alpha3Code),n=t.getContext("2d");d.a.from(n,e.flag).then((function(e){e.render().then((function(){t.style.width="120px",t.style.height=120*t.height/t.width+"px",t.style.border="1px solid gray"}))}))}))}),[u]);var O=function(e){var t=!1;return u.indexOf(e)>=0&&(t=!0),Object(N.jsx)("tr",{onClick:function(){u.indexOf(e)>=0?h(u.filter((function(t){return e!==t}))):h([].concat(Object(l.a)(u),[e]))},className:t?"is-selected":"",children:Object(N.jsx)("td",{children:e.name})},e.alpha3Code)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.a.event({category:"Flags",action:"Generate new mashup flags"});var t=[];f.map((function(e){e.colorData.map((function(e){t.push(e.color)}))}));var n=w(e,t),c=document.getElementById("canvas_generated"),a=c.getContext("2d");d.a.from(a,n).then((function(e){e.render().then((function(){c.style.width="120px",c.style.height=120*c.height/c.width+"px",c.style.border="1px solid gray"}))}))};return Object(N.jsxs)("div",{className:"columns",children:[Object(N.jsxs)("div",{className:"column",children:[Object(N.jsx)("strong",{children:"Select countries"}),Object(N.jsx)("div",{className:"table-container",style:{height:"18rem",overflowY:"scroll"},children:Object(N.jsx)("table",{className:"table is-bordered is-striped is-narrow is-hoverable",children:Object(N.jsx)("tbody",{children:n.map((function(e){return O(e)}))})})})]}),Object(N.jsxs)("div",{className:"column",children:[Object(N.jsx)("strong",{children:"Selected countries"}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{onClick:function(){var e=[];u.forEach((function(t){e.push({flagData:t,colorData:x(document.getElementById("canvas_"+t.alpha3Code))})})),g(e)},className:"button is-small is-primary is-outlined",children:"Analyze colors"}),u.map((function(e){return Object(N.jsxs)("div",{children:[Object(N.jsx)("h4",{children:e.name}),Object(N.jsx)("canvas",{id:"canvas_"+e.alpha3Code})]},"selected_"+e.alpha3Code)}))]}),Object(N.jsxs)("div",{className:"column",children:[Object(N.jsx)("strong",{children:"Selected flags color data"}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{onClick:function(){return p(!0)},className:"button is-small is-primary is-outlined",children:"Generate H flags"}),Object(N.jsx)("button",{onClick:function(){return p(!1)},className:"button is-small is-primary is-outlined",children:"Generate V flags"}),f.map((function(e){return Object(N.jsxs)("div",{children:[Object(N.jsx)("h4",{children:e.flagData.name}),Object(N.jsx)("div",{children:e.colorData.map((function(t){return Object(N.jsxs)("div",{children:[Object(N.jsx)("span",{style:{border:"1px solid gray",backgroundColor:t.color},children:"\xa0\xa0\xa0\xa0"}),Object(N.jsxs)("span",{children:[" ",t.color,", ",t.area,"%"]})]},"color_sample_"+e.flagData.alpha3Code+"_"+t.color)}))}),Object(N.jsx)("hr",{style:{margin:0,marginBottom:"1rem"}})]},"selected_analyzed_"+e.flagData.alpha3Code)}))]}),Object(N.jsxs)("div",{className:"column",children:[Object(N.jsx)("strong",{children:"Generated mashup flags"}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{onClick:function(){return p(!0)},className:"button is-small is-primary is-outlined",children:"Re-generate H"}),Object(N.jsx)("button",{onClick:function(){return p(!1)},className:"button is-small is-primary is-outlined",children:"Re-generate V"}),Object(N.jsx)("div",{children:Object(N.jsx)("canvas",{id:"canvas_generated"})})]})]})};s.a.initialize("UA-199628575-1"),s.a.pageview(window.location.pathname+window.location.search);var F=function(){return Object(c.useEffect)((function(){s.a.pageview("/")}),[]),Object(N.jsxs)("div",{children:[Object(N.jsx)("section",{className:"hero is-dark",children:Object(N.jsx)("div",{className:"hero-body",children:Object(N.jsx)("div",{className:"container",children:Object(N.jsx)("h1",{className:"title",children:"[WIP]National Diversity Barcodes"})})})}),Object(N.jsx)("section",{className:"section",children:Object(N.jsx)("div",{className:"container ",children:Object(N.jsx)(C,{})})}),Object(N.jsx)("footer",{className:"footer",children:Object(N.jsx)("div",{className:"content has-text-centered",children:"ConnectionWorks Inc."})})]})};i.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(F,{})}),document.getElementById("root"))}},[[424,1,2]]]);
//# sourceMappingURL=main.1c40c31a.chunk.js.map