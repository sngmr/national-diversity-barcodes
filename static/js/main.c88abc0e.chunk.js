(this["webpackJsonpnational-diversity-barcodes"]=this["webpackJsonpnational-diversity-barcodes"]||[]).push([[0],{397:function(e,a,o){"use strict";o.r(a);var n=o(20),i=o.n(n),c=o(177),s=o.n(c),t=(o(190),o(56)),d=o(185),r=o(57),m=o(116),l=o(126),u=o.n(l),h=o(184),b={getAllNationalFlags:function(){return Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:g});case 1:case"end":return e.stop()}}),e)})))()}},g=[{iso2code:"aw",name:"Aruba"},{iso2code:"af",name:"Afghanistan"},{iso2code:"ao",name:"Angola"},{iso2code:"al",name:"Albania"},{iso2code:"ad",name:"Andorra"},{iso2code:"ae",name:"United Arab Emirates"},{iso2code:"ar",name:"Argentina"},{iso2code:"am",name:"Armenia"},{iso2code:"as",name:"American Samoa"},{iso2code:"ag",name:"Antigua and Barbuda"},{iso2code:"au",name:"Australia"},{iso2code:"at",name:"Austria"},{iso2code:"az",name:"Azerbaijan"},{iso2code:"bi",name:"Burundi"},{iso2code:"be",name:"Belgium"},{iso2code:"bj",name:"Benin"},{iso2code:"bf",name:"Burkina Faso"},{iso2code:"bd",name:"Bangladesh"},{iso2code:"bg",name:"Bulgaria"},{iso2code:"bh",name:"Bahrain"},{iso2code:"bs",name:"Bahamas, The"},{iso2code:"ba",name:"Bosnia and Herzegovina"},{iso2code:"by",name:"Belarus"},{iso2code:"bz",name:"Belize"},{iso2code:"bm",name:"Bermuda"},{iso2code:"bo",name:"Bolivia"},{iso2code:"br",name:"Brazil"},{iso2code:"bb",name:"Barbados"},{iso2code:"bn",name:"Brunei Darussalam"},{iso2code:"bt",name:"Bhutan"},{iso2code:"bw",name:"Botswana"},{iso2code:"cf",name:"Central African Republic"},{iso2code:"ca",name:"Canada"},{iso2code:"ch",name:"Switzerland"},{iso2code:"cl",name:"Chile"},{iso2code:"cn",name:"China"},{iso2code:"ci",name:"Cote d'Ivoire"},{iso2code:"cm",name:"Cameroon"},{iso2code:"cd",name:"Congo, Dem. Rep."},{iso2code:"cg",name:"Congo, Rep."},{iso2code:"co",name:"Colombia"},{iso2code:"km",name:"Comoros"},{iso2code:"cv",name:"Cabo Verde"},{iso2code:"cr",name:"Costa Rica"},{iso2code:"cu",name:"Cuba"},{iso2code:"cw",name:"Curacao"},{iso2code:"ky",name:"Cayman Islands"},{iso2code:"cy",name:"Cyprus"},{iso2code:"cz",name:"Czech Republic"},{iso2code:"de",name:"Germany"},{iso2code:"dj",name:"Djibouti"},{iso2code:"dm",name:"Dominica"},{iso2code:"dk",name:"Denmark"},{iso2code:"do",name:"Dominican Republic"},{iso2code:"dz",name:"Algeria"},{iso2code:"ec",name:"Ecuador"},{iso2code:"eg",name:"Egypt, Arab Rep."},{iso2code:"er",name:"Eritrea"},{iso2code:"es",name:"Spain"},{iso2code:"ee",name:"Estonia"},{iso2code:"et",name:"Ethiopia"},{iso2code:"fi",name:"Finland"},{iso2code:"fj",name:"Fiji"},{iso2code:"fr",name:"France"},{iso2code:"fo",name:"Faroe Islands"},{iso2code:"fm",name:"Micronesia, Fed. Sts."},{iso2code:"ga",name:"Gabon"},{iso2code:"gb",name:"United Kingdom"},{iso2code:"ge",name:"Georgia"},{iso2code:"gh",name:"Ghana"},{iso2code:"gi",name:"Gibraltar"},{iso2code:"gn",name:"Guinea"},{iso2code:"gm",name:"Gambia, The"},{iso2code:"gw",name:"Guinea-Bissau"},{iso2code:"gq",name:"Equatorial Guinea"},{iso2code:"gr",name:"Greece"},{iso2code:"gd",name:"Grenada"},{iso2code:"gl",name:"Greenland"},{iso2code:"gt",name:"Guatemala"},{iso2code:"gu",name:"Guam"},{iso2code:"gy",name:"Guyana"},{iso2code:"hk",name:"Hong Kong SAR, China"},{iso2code:"hn",name:"Honduras"},{iso2code:"hr",name:"Croatia"},{iso2code:"ht",name:"Haiti"},{iso2code:"hu",name:"Hungary"},{iso2code:"id",name:"Indonesia"},{iso2code:"im",name:"Isle of Man"},{iso2code:"in",name:"India"},{iso2code:"ie",name:"Ireland"},{iso2code:"ir",name:"Iran, Islamic Rep."},{iso2code:"iq",name:"Iraq"},{iso2code:"is",name:"Iceland"},{iso2code:"il",name:"Israel"},{iso2code:"it",name:"Italy"},{iso2code:"jm",name:"Jamaica"},{iso2code:"jo",name:"Jordan"},{iso2code:"jp",name:"Japan"},{iso2code:"kz",name:"Kazakhstan"},{iso2code:"ke",name:"Kenya"},{iso2code:"kg",name:"Kyrgyz Republic"},{iso2code:"kh",name:"Cambodia"},{iso2code:"ki",name:"Kiribati"},{iso2code:"kn",name:"St. Kitts and Nevis"},{iso2code:"kr",name:"Korea, Rep."},{iso2code:"kw",name:"Kuwait"},{iso2code:"la",name:"Lao PDR"},{iso2code:"lb",name:"Lebanon"},{iso2code:"lr",name:"Liberia"},{iso2code:"ly",name:"Libya"},{iso2code:"lc",name:"St. Lucia"},{iso2code:"li",name:"Liechtenstein"},{iso2code:"lk",name:"Sri Lanka"},{iso2code:"ls",name:"Lesotho"},{iso2code:"lt",name:"Lithuania"},{iso2code:"lu",name:"Luxembourg"},{iso2code:"lv",name:"Latvia"},{iso2code:"mo",name:"Macao SAR, China"},{iso2code:"mf",name:"St. Martin (French part)"},{iso2code:"ma",name:"Morocco"},{iso2code:"mc",name:"Monaco"},{iso2code:"md",name:"Moldova"},{iso2code:"mg",name:"Madagascar"},{iso2code:"mv",name:"Maldives"},{iso2code:"mx",name:"Mexico"},{iso2code:"mh",name:"Marshall Islands"},{iso2code:"mk",name:"North Macedonia"},{iso2code:"ml",name:"Mali"},{iso2code:"mt",name:"Malta"},{iso2code:"mm",name:"Myanmar"},{iso2code:"me",name:"Montenegro"},{iso2code:"mn",name:"Mongolia"},{iso2code:"mp",name:"Northern Mariana Islands"},{iso2code:"mz",name:"Mozambique"},{iso2code:"mr",name:"Mauritania"},{iso2code:"mu",name:"Mauritius"},{iso2code:"mw",name:"Malawi"},{iso2code:"my",name:"Malaysia"},{iso2code:"na",name:"Namibia"},{iso2code:"nc",name:"New Caledonia"},{iso2code:"ne",name:"Niger"},{iso2code:"ng",name:"Nigeria"},{iso2code:"ni",name:"Nicaragua"},{iso2code:"nl",name:"Netherlands"},{iso2code:"no",name:"Norway"},{iso2code:"np",name:"Nepal"},{iso2code:"nr",name:"Nauru"},{iso2code:"nz",name:"New Zealand"},{iso2code:"om",name:"Oman"},{iso2code:"pk",name:"Pakistan"},{iso2code:"pa",name:"Panama"},{iso2code:"pe",name:"Peru"},{iso2code:"ph",name:"Philippines"},{iso2code:"pw",name:"Palau"},{iso2code:"pg",name:"Papua New Guinea"},{iso2code:"pl",name:"Poland"},{iso2code:"pr",name:"Puerto Rico"},{iso2code:"kp",name:"Korea, Dem. People's Rep."},{iso2code:"pt",name:"Portugal"},{iso2code:"py",name:"Paraguay"},{iso2code:"ps",name:"West Bank and Gaza"},{iso2code:"pf",name:"French Polynesia"},{iso2code:"qa",name:"Qatar"},{iso2code:"ro",name:"Romania"},{iso2code:"ru",name:"Russian Federation"},{iso2code:"rw",name:"Rwanda"},{iso2code:"sa",name:"Saudi Arabia"},{iso2code:"sd",name:"Sudan"},{iso2code:"sn",name:"Senegal"},{iso2code:"sg",name:"Singapore"},{iso2code:"sb",name:"Solomon Islands"},{iso2code:"sl",name:"Sierra Leone"},{iso2code:"sv",name:"El Salvador"},{iso2code:"sm",name:"San Marino"},{iso2code:"so",name:"Somalia"},{iso2code:"rs",name:"Serbia"},{iso2code:"ss",name:"South Sudan"},{iso2code:"st",name:"Sao Tome and Principe"},{iso2code:"sr",name:"Suriname"},{iso2code:"sk",name:"Slovak Republic"},{iso2code:"si",name:"Slovenia"},{iso2code:"se",name:"Sweden"},{iso2code:"sz",name:"Eswatini"},{iso2code:"sx",name:"Sint Maarten (Dutch part)"},{iso2code:"sc",name:"Seychelles"},{iso2code:"sy",name:"Syrian Arab Republic"},{iso2code:"tc",name:"Turks and Caicos Islands"},{iso2code:"td",name:"Chad"},{iso2code:"tg",name:"Togo"},{iso2code:"th",name:"Thailand"},{iso2code:"tj",name:"Tajikistan"},{iso2code:"tm",name:"Turkmenistan"},{iso2code:"tl",name:"Timor-Leste"},{iso2code:"to",name:"Tonga"},{iso2code:"tt",name:"Trinidad and Tobago"},{iso2code:"tn",name:"Tunisia"},{iso2code:"tr",name:"Turkey"},{iso2code:"tv",name:"Tuvalu"},{iso2code:"tw",name:"Taiwan, China"},{iso2code:"tz",name:"Tanzania"},{iso2code:"ug",name:"Uganda"},{iso2code:"ua",name:"Ukraine"},{iso2code:"uy",name:"Uruguay"},{iso2code:"us",name:"United States"},{iso2code:"uz",name:"Uzbekistan"},{iso2code:"vc",name:"St. Vincent and the Grenadines"},{iso2code:"ve",name:"Venezuela, RB"},{iso2code:"vg",name:"British Virgin Islands"},{iso2code:"vi",name:"Virgin Islands (U.S.)"},{iso2code:"vn",name:"Vietnam"},{iso2code:"vu",name:"Vanuatu"},{iso2code:"ws",name:"Samoa"},{iso2code:"xk",name:"Kosovo"},{iso2code:"ye",name:"Yemen, Rep."},{iso2code:"za",name:"South Africa"},{iso2code:"zm",name:"Zambia"},{iso2code:"zw",name:"Zimbabwe"}];function j(e){var a=e.width*e.height,o=function(e,a,o){return function(e,a,o){for(var n,i,c,s,t=[],d=0;d<a;d+=o)i=e[n=4*d],c=e[n+1],s=e[n+2],t.push([i,c,s]);return t}(e.getContext("2d").getImageData(0,0,e.width,e.height).data,a,o)}(e,a,10).map((function(e){return"#"+e.map((function(e){return("0"+e.toString(16)).slice(-2)})).join("")})).reduce((function(e,a){return e[a]=(e[a]||0)+1,e}),{});return Object.entries(o).map((function(e){var o=Object(r.a)(e,2),n=o[0],i=o[1];return{color:n,count:i,pixelCount:a,area:i/a*10}})).sort((function(e,a){return a.count-e.count})).filter((function(e){return e.count>=.0025*a}))}var f=o(127),p=o(128),v=o.n(p),x=1600,O=900,y={name:"svg",type:"element",value:"",attributes:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:x,height:O},children:[{name:"rect",type:"element",value:"",attributes:{x:0,y:0,width:x,height:O,fill:"#FFFFFF"},children:[]}]},w={name:"rect",type:"element",value:"",attributes:null,children:[]};function S(e,a){for(var o=v()(a.filter((function(e){return"#FFFFFF"!==e.toUpperCase()}))),n=e?O:x,i=n/o.length*.25,c=(n-i*(o.length-1))/o.length,s=N(y),t=0;t<o.length;t++){var d=N(w);d.attributes={x:e?0:t*c+t*i,y:e?t*c+t*i:0,width:e?x:c,height:e?c:O,fill:o[t]},s.children.push(d)}return f.stringify(s)}function k(e,a){var o=[];a.map((function(e){e.colorData.filter((function(e){return"#FFFFFF"!==e.color.toUpperCase()})).map((function(e){o.push({color:e.color,area:e.area})}))})),o=v()(o);for(var n=e?O:x,i=n/o.length*.25,c=n-(o.length-1)*i,s=o.reduce((function(e,a){return e+a.area}),0),t=0;t<o.length;t++)o[t].fillRate=o[t].area/s;for(var d=N(y),r=0,m=0;m<o.length;m++){var l=N(w),u=Math.round(c*o[m].fillRate);l.attributes={x:e?0:r+m*i,y:e?r+m*i:0,width:e?x:u,height:e?u:O,fill:o[m].color},r+=u,d.children.push(l)}return f.stringify(d)}function N(e){return JSON.parse(JSON.stringify(e))}var C=o(3);var F=function(){var e=Object(n.useState)([]),a=Object(r.a)(e,2),o=a[0],i=a[1],c=Object(n.useState)([]),s=Object(r.a)(c,2),l=s[0],u=s[1],h=Object(n.useState)([]),g=Object(r.a)(h,2),f=g[0],p=g[1];Object(n.useEffect)((function(){b.getAllNationalFlags().then((function(e){i(e.data)}))}),[]),Object(n.useEffect)((function(){l.forEach((function(e){var a=document.getElementById("canvas_"+e.iso2code),o=a.getContext("2d");m.a.from(o,"/national-diversity-barcodes/flags/"+e.iso2code+".svg").then((function(e){e.render().then((function(){O(a,120)}))}))}))}),[l]);var v=function(e){var a=!1;return l.indexOf(e)>=0&&(a=!0),Object(C.jsx)("tr",{onClick:function(){l.indexOf(e)>=0?u(l.filter((function(a){return e!==a}))):u([].concat(Object(d.a)(l),[e]))},className:a?"is-selected":"",children:Object(C.jsx)("td",{children:e.name})},e.iso2code)},x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.a.event({category:"Flags",action:"Generate new mashup flags"});var a=function(e,a){var o=document.getElementById(e),n=o.getContext("2d");m.a.from(n,a).then((function(e){e.render().then((function(){O(o,120)}))}))},o=[];f.map((function(e){e.colorData.map((function(e){o.push(e.color)}))})),a("canvas_generated_1",S(e,o)),a("canvas_generated_2",k(e,f))},O=function(e,a){e.style.width=a+"px",e.style.height=e.height*a/e.width+"px",e.style.border="1px solid gray"};return Object(C.jsxs)("div",{className:"columns",children:[Object(C.jsxs)("div",{className:"column",children:[Object(C.jsx)("strong",{children:"Select countries"}),Object(C.jsx)("div",{className:"table-container",style:{height:"18rem",overflowY:"scroll"},children:Object(C.jsx)("table",{className:"table is-bordered is-striped is-narrow is-hoverable",children:Object(C.jsx)("tbody",{children:o.map((function(e){return v(e)}))})})})]}),Object(C.jsxs)("div",{className:"column",children:[Object(C.jsx)("strong",{children:"Selected countries"}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{onClick:function(){var e=[];l.forEach((function(a){e.push({flagData:a,colorData:j(document.getElementById("canvas_"+a.iso2code))})})),p(e)},className:"button is-small is-primary is-outlined",children:"Analyze colors"}),l.map((function(e){return Object(C.jsxs)("div",{children:[Object(C.jsx)("h4",{children:e.name}),Object(C.jsx)("canvas",{id:"canvas_"+e.iso2code})]},"selected_"+e.iso2code)}))]}),Object(C.jsxs)("div",{className:"column",children:[Object(C.jsx)("strong",{children:"Selected flags color data"}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{onClick:function(){return x(!0)},className:"button is-small is-primary is-outlined",children:"Generate H flags"}),Object(C.jsx)("button",{onClick:function(){return x(!1)},className:"button is-small is-primary is-outlined",children:"Generate V flags"}),f.map((function(e){return Object(C.jsxs)("div",{children:[Object(C.jsx)("h4",{children:e.flagData.name}),Object(C.jsx)("div",{children:e.colorData.map((function(a){return Object(C.jsxs)("div",{children:[Object(C.jsx)("span",{style:{border:"1px solid gray",backgroundColor:a.color},children:"\xa0\xa0\xa0\xa0"}),Object(C.jsxs)("span",{children:[" ",a.color,", ",Math.round(100*a.area),"%"]})]},"color_sample_"+e.flagData.iso2code+"_"+a.color)}))}),Object(C.jsx)("hr",{style:{margin:0,marginBottom:"1rem"}})]},"selected_analyzed_"+e.flagData.iso2code)}))]}),Object(C.jsxs)("div",{className:"column",children:[Object(C.jsx)("strong",{children:"Generated mashup flags"}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{onClick:function(){return x(!0)},className:"button is-small is-primary is-outlined",children:"Re-generate H"}),Object(C.jsx)("button",{onClick:function(){return x(!1)},className:"button is-small is-primary is-outlined",children:"Re-generate V"}),Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("h4",{children:"Pattern 1"}),Object(C.jsx)("canvas",{id:"canvas_generated_1"})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("h4",{children:"Pattern 2"}),Object(C.jsx)("canvas",{id:"canvas_generated_2"})]})]})]})]})};t.a.initialize("UA-199628575-1"),t.a.pageview(window.location.pathname+window.location.search);var z=function(){return Object(n.useEffect)((function(){t.a.pageview("/")}),[]),Object(C.jsxs)("div",{children:[Object(C.jsx)("section",{className:"hero is-dark",children:Object(C.jsx)("div",{className:"hero-body",children:Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("h1",{className:"title",children:"[WIP]National Diversity Barcodes"})})})}),Object(C.jsx)("section",{className:"section",children:Object(C.jsx)("div",{className:"container ",children:Object(C.jsx)(F,{})})}),Object(C.jsx)("footer",{className:"footer",children:Object(C.jsx)("div",{className:"content has-text-centered",children:"ConnectionWorks Inc."})})]})};s.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(z,{})}),document.getElementById("root"))}},[[397,1,2]]]);
//# sourceMappingURL=main.c88abc0e.chunk.js.map