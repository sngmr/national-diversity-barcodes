(this["webpackJsonpnational-diversity-barcodes"]=this["webpackJsonpnational-diversity-barcodes"]||[]).push([[0],{424:function(e,t,n){"use strict";n.r(t);var a=n(20),r=n.n(a),c=n(186),i=n.n(c),s=(n(200),n(57)),o=n(195),l=n(58),u=n(118),d=n(128),h=n.n(d),j=n(193),b=n(194),f=n.n(b),m={getAllNationalFlags:function(){return Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://restcountries.eu/rest/v2/all");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}};function g(e){var t=e.width*e.height,n=function(e,t,n){return function(e,t,n){for(var a,r,c,i,s=[],o=0;o<t;o+=n)r=e[a=4*o],c=e[a+1],i=e[a+2],s.push([r,c,i]);return s}(e.getContext("2d").getImageData(0,0,e.width,e.height).data,t,n)}(e,t,10).map((function(e){return"#"+e.map((function(e){return("0"+e.toString(16)).slice(-2)})).join("")})).reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{});return Object.entries(n).map((function(e){var n=Object(l.a)(e,2),a=n[0],r=n[1];return{color:a,count:r,pixelCount:t,area:r/t*10}})).sort((function(e,t){return t.count-e.count})).filter((function(e){return e.count>=.0025*t}))}var x=n(129),O=n(130),v=n.n(O),p=1600,y=900,N={name:"svg",type:"element",value:"",attributes:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:p,height:y},children:[{name:"rect",type:"element",value:"",attributes:{x:0,y:0,width:p,height:y,fill:"#FFFFFF"},children:[]}]},w={name:"rect",type:"element",value:"",attributes:null,children:[]};function C(e,t){for(var n=v()(t.filter((function(e){return"#FFFFFF"!==e.toUpperCase()}))),a=e?y:p,r=a/n.length*.25,c=(a-r*(n.length-1))/n.length,i=_(N),s=0;s<n.length;s++){var o=_(w);o.attributes={x:e?0:s*c+s*r,y:e?s*c+s*r:0,width:e?p:c,height:e?c:y,fill:n[s]},i.children.push(o)}return x.stringify(i)}function F(e,t){var n=[];t.map((function(e){e.colorData.filter((function(e){return"#FFFFFF"!==e.color.toUpperCase()})).map((function(e){n.push({color:e.color,area:e.area})}))})),n=v()(n);for(var a=e?y:p,r=a/n.length*.25,c=a-(n.length-1)*r,i=n.reduce((function(e,t){return e+t.area}),0),s=0;s<n.length;s++)n[s].fillRate=n[s].area/i;for(var o=_(N),l=0,u=0;u<n.length;u++){var d=_(w),h=Math.round(c*n[u].fillRate);d.attributes={x:e?0:l+u*r,y:e?l+u*r:0,width:e?p:h,height:e?h:y,fill:n[u].color},l+=h,o.children.push(d)}return x.stringify(o)}function _(e){return JSON.parse(JSON.stringify(e))}var k=n(3);var D=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(l.a)(c,2),d=i[0],h=i[1],j=Object(a.useState)([]),b=Object(l.a)(j,2),f=b[0],x=b[1];Object(a.useEffect)((function(){m.getAllNationalFlags().then((function(e){r(e.data)}))}),[]),Object(a.useEffect)((function(){d.forEach((function(e){var t=document.getElementById("canvas_"+e.alpha3Code),n=t.getContext("2d");u.a.from(n,e.flag).then((function(e){e.render().then((function(){p(t,120)}))}))}))}),[d]);var O=function(e){var t=!1;return d.indexOf(e)>=0&&(t=!0),Object(k.jsx)("tr",{onClick:function(){d.indexOf(e)>=0?h(d.filter((function(t){return e!==t}))):h([].concat(Object(o.a)(d),[e]))},className:t?"is-selected":"",children:Object(k.jsx)("td",{children:e.name})},e.alpha3Code)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.a.event({category:"Flags",action:"Generate new mashup flags"});var t=function(e,t){var n=document.getElementById(e),a=n.getContext("2d");u.a.from(a,t).then((function(e){e.render().then((function(){p(n,120)}))}))},n=[];f.map((function(e){e.colorData.map((function(e){n.push(e.color)}))})),t("canvas_generated_1",C(e,n)),t("canvas_generated_2",F(e,f))},p=function(e,t){e.style.width=t+"px",e.style.height=e.height*t/e.width+"px",e.style.border="1px solid gray"};return Object(k.jsxs)("div",{className:"columns",children:[Object(k.jsxs)("div",{className:"column",children:[Object(k.jsx)("strong",{children:"Select countries"}),Object(k.jsx)("div",{className:"table-container",style:{height:"18rem",overflowY:"scroll"},children:Object(k.jsx)("table",{className:"table is-bordered is-striped is-narrow is-hoverable",children:Object(k.jsx)("tbody",{children:n.map((function(e){return O(e)}))})})})]}),Object(k.jsxs)("div",{className:"column",children:[Object(k.jsx)("strong",{children:"Selected countries"}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{onClick:function(){var e=[];d.forEach((function(t){e.push({flagData:t,colorData:g(document.getElementById("canvas_"+t.alpha3Code))})})),x(e)},className:"button is-small is-primary is-outlined",children:"Analyze colors"}),d.map((function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)("h4",{children:e.name}),Object(k.jsx)("canvas",{id:"canvas_"+e.alpha3Code})]},"selected_"+e.alpha3Code)}))]}),Object(k.jsxs)("div",{className:"column",children:[Object(k.jsx)("strong",{children:"Selected flags color data"}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{onClick:function(){return v(!0)},className:"button is-small is-primary is-outlined",children:"Generate H flags"}),Object(k.jsx)("button",{onClick:function(){return v(!1)},className:"button is-small is-primary is-outlined",children:"Generate V flags"}),f.map((function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)("h4",{children:e.flagData.name}),Object(k.jsx)("div",{children:e.colorData.map((function(t){return Object(k.jsxs)("div",{children:[Object(k.jsx)("span",{style:{border:"1px solid gray",backgroundColor:t.color},children:"\xa0\xa0\xa0\xa0"}),Object(k.jsxs)("span",{children:[" ",t.color,", ",Math.round(100*t.area),"%"]})]},"color_sample_"+e.flagData.alpha3Code+"_"+t.color)}))}),Object(k.jsx)("hr",{style:{margin:0,marginBottom:"1rem"}})]},"selected_analyzed_"+e.flagData.alpha3Code)}))]}),Object(k.jsxs)("div",{className:"column",children:[Object(k.jsx)("strong",{children:"Generated mashup flags"}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{onClick:function(){return v(!0)},className:"button is-small is-primary is-outlined",children:"Re-generate H"}),Object(k.jsx)("button",{onClick:function(){return v(!1)},className:"button is-small is-primary is-outlined",children:"Re-generate V"}),Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("h4",{children:"Pattern 1"}),Object(k.jsx)("canvas",{id:"canvas_generated_1"})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("h4",{children:"Pattern 2"}),Object(k.jsx)("canvas",{id:"canvas_generated_2"})]})]})]})]})};s.a.initialize("UA-199628575-1"),s.a.pageview(window.location.pathname+window.location.search);var S=function(){return Object(a.useEffect)((function(){s.a.pageview("/")}),[]),Object(k.jsxs)("div",{children:[Object(k.jsx)("section",{className:"hero is-dark",children:Object(k.jsx)("div",{className:"hero-body",children:Object(k.jsx)("div",{className:"container",children:Object(k.jsx)("h1",{className:"title",children:"[WIP]National Diversity Barcodes"})})})}),Object(k.jsx)("section",{className:"section",children:Object(k.jsx)("div",{className:"container ",children:Object(k.jsx)(D,{})})}),Object(k.jsx)("footer",{className:"footer",children:Object(k.jsx)("div",{className:"content has-text-centered",children:"ConnectionWorks Inc."})})]})};i.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(S,{})}),document.getElementById("root"))}},[[424,1,2]]]);
//# sourceMappingURL=main.36626cc2.chunk.js.map